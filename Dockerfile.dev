FROM node:16

WORKDIR /app

# Copiar archivos de dependencias primero para aprovechar la caché de Docker
COPY package*.json ./
RUN npm install

# Copiar el resto de archivos de la aplicación
COPY . .

# Hacer ejecutable el script wrapper para desarrollo
RUN chmod +x ./app-dev-wrapper.sh

# Puerto que expondrá la aplicación
EXPOSE 3000

# Usar el wrapper como comando de inicio
CMD ["./app-dev-wrapper.sh"]
